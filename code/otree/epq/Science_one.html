{% extends "global/Page.html" %}
{% load staticfiles otree %}

{% block title %}
    Questionnaire (Page 1 of 3)
{% endblock %}

{% block content %}
    <style>
    .otree-timer {
        display: none;
    }
    .myclass::-webkit-slider-thumb {
        box-shadow: 2px 2px 2px #000000, 0px 0px 1px #007afe;
        border: 1px solid #000000;
        height: 21px;
        width: 10px;
        border-radius: 0px;
        background: #ffffff;
        cursor: pointer;
        -webkit-appearance: none !important;
        margin-top: 0px; /* You need to specify a margin in Chrome, but in Firefox and IE it is automatic */
    }

    .myclass::-moz-range-thumb {
        box-shadow: 2px 2px 2px #000000, 0px 0px 1px #007afe;
        border: 1px solid #000000;
        height: 21px;
        width: 10px;
        border-radius: 0px;
        background: #ffffff;
        -webkit-appearance: none !important;
        cursor: pointer;
    }

    .myclass::-ms-thumb {
        box-shadow: 2px 2px 2px #000000, 0px 0px 1px #007afe;
        border: 1px solid #000000;
        height: 21px;
        width: 10px;
        -webkit-appearance: none !important;
        border-radius: 0px;
        background: #ffffff;
        cursor: pointer;
    }
        .myclass::-ms-track {
        width: 100%;
        cursor: pointer;
        background: transparent;
        border-color: transparent;
        color: transparent;
    }

    .myclass:focus {
        outline: none;
    }

    .myclass {
        -webkit-appearance: none;
        width: 90%;
        margin: 18px 0;
        height: 12px;
        background: #007afe;
        border-radius: 15px;
        border: 0.0px solid #ffffff;
    }

    .slider::-moz-range-thumb {
        box-shadow: 2px 2px 2px #000000, 0px 0px 1px #007afe;
        border: 1px solid #000000;
        height: 21px;
        width: 10px;
        border-radius: 0px;
        background: #ffffff;
        cursor: pointer;
        visibility: hidden;
    }

    .slider::-webkit-slider-thumb {
        border: 1px solid #000000;
        height: 21px;
        width: 10px;
        border-radius: 0px;
        background: #ffffff;
        cursor: pointer;
        margin-top: 0px; /* You need to specify a margin in Chrome, but in Firefox and IE it is automatic */
        box-shadow: 2px 2px 2px #000000, 0px 0px 1px #007afe;
        visibility: hidden;
    }

    .slider::-ms-thumb {
        box-shadow: 2px 2px 2px #000000, 0px 0px 1px #007afe;
        border: 1px solid #000000;
        height: 21px;
        width: 10px;
        border-radius: 0px;
        background: #ffffff;
        cursor: pointer;
        visibility: hidden;
    }
    .slider::-ms-track {
        width: 100%;
        cursor: pointer;
        background: transparent;
        border-color: transparent;
        color: transparent;
    }

    .slider:focus {
        outline: none;
    }

    .slider {
        -webkit-appearance: none;
        width: 90%;
        margin: 18px 0;
        height: 12px;
        background: #007afe;
        border-radius: 15px;
        border: 0.0px solid #ffffff;
    }
    </style>

    <div class="card card-body bg-light instructions" style="text-align:center">
        The following questions are about your views on publicly sharing research materials (i.e., data, code, and research procedures).
    </div>
     <table class="table">
        <tr>
            <td>
                <label for="id_heard_materials">How familiar are you with the practice of publicly sharing research materials (i.e., data, code, and research procedures) for a completed study?</label>
            </td>
            <td align="right">
                <select class="form-select" id="id_heard_materials" name="heard_materials" required=""><option value="">--------</option><option value="1">Not at all familiar</option><option value="2">Slightly familiar</option><option value="3">Somewhat familiar</option><option value="4">Moderately familiar</option><option value="5">Extremely familiar</option></select>
            </td>
        </tr>
         <tr>
            <td>
                <label for="id_progress">To what extent do you believe that publicly sharing research materials (i.e., data, code, and research procedures) is important for the advancement of accounting research?</label>
            </td>
            <td align="right" style="width: 50%;">
                <select class="form-select" id="id_progress" name="progress" required=""><option value="">--------</option><option value="1">Not at all important</option><option value="2">Moderately not important</option><option value="3">Neither unimportant nor important</option><option value="4">Moderately important</option><option value="5">Very important</option></select>
            </td>
        </tr>

         <tr>
            <td>
                In your estimation, what percentage of accounting researchers publicly share research materials (i.e., data, code, and research procedures) (0-100%)?
            </td>
            <td align="right" style="width: 50%;">
                    <p align="center"><b><label for="est_other_post_online"></label></b><br>
                        <input type="range" id="est_other_post_online" name="est_other_post_online" class="slider" step="1" min="0" max="100"></p>
                    <input type="hidden" id="check_est_other_post_online" value="0">
            </td>
        </tr>

         <tr>
            <td>
                <label for="id_est_you_post_online">How often do you publicly share research materials (i.e., data, code, and research procedures)?</label>
            </td>
            <td align="right" style="width: 50%;">
                <select class="form-select" onchange="myFunction()" id="id_est_you_post_online" name="est_you_post_online" required=""><option value="">--------</option><option value="1">Never</option><option value="2">Rarely</option><option value="3">Sometimes</option><option value="4">Often</option><option value="5">Always</option></select>
            </td>
        </tr>

         <tr id="row_con" style="display:none;">
            <td>
                What are reasons that kept you from publicly sharing research materials (i.e., data, code, and research procedures)? (multiple answers possible)
            </td>
            <td style="width: 50%;">
                    <input name="reason_one" id="reason_one" type="checkbox" value="1"/>
                    <label for="reason_one">The data were proprietary or access was restricted</label><br>
                    <input name="reason_two" id="reason_two" type="checkbox" value="1"/>
                    <label for="reason_two">It was too time consuming</label><br>
                    <input name="reason_three" id="reason_three" type="checkbox" value="1"/>
                    <label for="reason_three">I didn't want to be scooped</label><br>
                    <input name="reason_four" id="reason_four" type="checkbox" value="1"/>
                    <label for="reason_four">The data were too difficult to de-identify</label><br>
                    <input name="reason_five" id="reason_five" type="checkbox" value="1"/>
                    <label for="reason_five">I didn't perceive my field to be in favor of this</label><br>
                    <input name="reason_six" id="reason_six" type="checkbox" value="1"/>
                    <label for="reason_six">The data were already publicly available</label><br>
                    <input name="reason_seven" id="reason_seven" type="checkbox" value="1"/>
                    <label for="reason_seven">I was nervous that someone would discover a mistake</label><br>
                    <input name="reason_eight" id="reason_eight" type="checkbox" value="1"/>
                    <label for="reason_eight">I was unfamiliar with the practice</label><br>
                    <input name="reason_nine" id="reason_nine" type="checkbox" value="1"/>
                    <label for="reason_nine">I am planning to but haven't done it yet</label><br>
                    <input name="reason_eleven" id="reason_eleven" type="checkbox" value="1"/>
                    <label for="reason_eleven">I was concerned about the overall quality of my materials</label><br>
                    <input name="reason_twelve" id="reason_twelve" type="checkbox" value="1"/>
                    <label for="reason_twelve">It seemed too complicated</label><br>
                    <input name="reason_ten" id="reason_ten" type="checkbox" value="1"/>
                    <label for="reason_ten">Other</label> <input type="text" id="reason_ten_text" name="reason_ten_text" value="">
            </td>
        </tr>

         <tr>
            <td>
                <label for="id_likelihood_future_post">Do you plan to publicly share research materials (i.e., data, code, and research procedures) in the future?</label>
            </td>
            <td align="right">
                <select class="form-select" id="id_likelihood_future_post" name="likelihood_future_post" required=""><option value="">--------</option><option value="1">No</option><option value="2">Yes</option></select>
            </td>
        </tr>

         <tr>
            <td>
                <label for="id_encourage_others">Do you encourage others to publicly share research materials (i.e., data, code, and research procedures)?</label>
            </td>
            <td align="right">
                <select class="form-select" id="id_encourage_others" name="encourage_others" required=""><option value="">--------</option><option value="1">No, and I don't plan to</option><option value="2">No, but I plan to in the future</option><option value="3">Yes, I do</option></select>
            </td>
        </tr>

         <tr>
            <td>
                In your estimation, what percentage of accounting researchers favor sharing research materials (i.e., data, code, and research procedures) publicly?
            </td>
            <td align="right">
                    <p align="center"><b><label for="acc_favor_public_post"></label></b><br>
                        <input type="range" id="acc_favor_public_post" name="acc_favor_public_post" class="slider" step="1" min="0" max="100"></p>
                    <input type="hidden" id="check_acc_favor_public_post" value="0">
            </td>
        </tr>
         <tr>
            <td>
                If you had to guess, approximately what percentage of editors of the top six accounting journals believe that publicly sharing research materials (i.e., data, code, and research procedures) increases the value of a manuscript?
            </td>
            <td align="right">
                    <p align="center"><b><label for="editors_believe"></label></b><br>
                        <input type="range" id="editors_believe" name="editors_believe" class="slider" step="1" min="0" max="100"></p>
                    <input type="hidden" id="check_editors_believe" value="0">
            </td>
        </tr>
    </table>

    <button class="otree-btn-next btn btn-outline-primary" onclick="show_alert(event);">Next</button>

{% endblock %}
{% block scripts %}
<script>
    function myFunction() {
        var optional = document.getElementById('id_est_you_post_online');
        var value_new = optional.value
        var row_con = document.getElementById('row_con');
        if(value_new == '1' || value_new == '2' || value_new == '3' || value_new == '4'){
            row_con.style.display ="table-row";
        }else{
            row_con.style.display ="none";
        }
    }
</script>

<script>
    $(document).ready(function() {
        $("input[name='acc_favor_public_post']").on('input change', function() {
            $("label[for='acc_favor_public_post']").text($(this).val() + "%");
            $('input[name="acc_favor_public_post"]').removeClass('slider');
            $('input[name="acc_favor_public_post"]').addClass('myclass');
            document.getElementById('check_acc_favor_public_post').value = '1';
        })
    })
</script>

<script>
    $(document).ready(function() {
        $("input[name='editors_believe']").on('input change', function() {
            $("label[for='editors_believe']").text($(this).val() + "%");
            $('input[name="editors_believe"]').removeClass('slider');
            $('input[name="editors_believe"]').addClass('myclass');
            document.getElementById('check_editors_believe').value = '1';
        })
    })
</script>

<script>
    $(document).ready(function() {
        $("input[name='est_other_post_online']").on('input change', function() {
            $("label[for='est_other_post_online']").text($(this).val() + "%");
            $('input[name="est_other_post_online"]').removeClass('slider');
            $('input[name="est_other_post_online"]').addClass('myclass');
            document.getElementById('check_est_other_post_online').value = '1';
        })
    })
</script>

<script>
const otherCheckbox = document.querySelector('#reason_ten');
const otherText = document.querySelector('#reason_ten_text');
otherText.style.visibility = 'hidden';

otherCheckbox.addEventListener('change', () => {
  if(otherCheckbox.checked) {
    otherText.style.visibility = 'visible';
    otherText.value = '';
  } else {
    otherText.style.visibility = 'hidden';
  }
});
</script>

<script>
    function show_alert() {
        var slider1 = document.getElementById("check_est_other_post_online").value
        var slider2 = document.getElementById("check_editors_believe").value
        var slider3 = document.getElementById("check_acc_favor_public_post").value
        if (slider1 == 0 | slider2 == 0 | slider3 == 0) {
            window.alert("Please drag all three sliders to continue.");
            event.preventDefault()
        }
        var reason_one = document.getElementById("reason_one")
        var reason_two = document.getElementById("reason_two")
        var reason_three = document.getElementById("reason_three")
        var reason_four = document.getElementById("reason_four")
        var reason_five = document.getElementById("reason_five")
        var reason_six = document.getElementById("reason_six")
        var reason_seven = document.getElementById("reason_seven")
        var reason_eight = document.getElementById("reason_eight")
        var reason_nine = document.getElementById("reason_nine")
        var reason_eleven = document.getElementById("reason_eleven")
        var reason_twelve = document.getElementById("reason_twelve")
        var reason_ten = document.getElementById("reason_ten")

        var optional = document.getElementById('id_est_you_post_online');
        var value_new = optional.value
        if (value_new == '1' || value_new == '2' || value_new == '3' || value_new == '4'){
            if (reason_one.checked == false & reason_two.checked == false & reason_three.checked == false & reason_four.checked == false & reason_five.checked == false & reason_six.checked == false & reason_seven.checked == false & reason_eight.checked == false & reason_nine.checked == false & reason_ten.checked == false & reason_eleven.checked == false & reason_twelve.checked == false) {
                window.alert("Please select at least one reason that kept you from publicly sharing research materials.");
                event.preventDefault()
            } else if (reason_ten.checked == true & document.getElementById('reason_ten_text').value == ""){
                window.alert("Please enter a reason in the text box behind 'Other' or uncheck that box.");
                event.preventDefault()
            }
        }
    }
</script>
{% endblock %}